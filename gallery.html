<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />

  <title>Galer√≠a | Entre Copas & Notas</title>
  <meta name="description" content="Recorr√© nuestra galer√≠a de c√≥cteles y maridajes, reviv√≠ eventos pasados y descubr√≠ experiencias donde el sabor fue el protagonista. Filtr√° por fecha y dejate llevar." />

  <!-- ‚úÖ Base primero -->
  <link rel="stylesheet" href="./css/base.css" />
  <!-- ‚úÖ P√°gina despu√©s -->
  <link rel="stylesheet" href="./css/gallery.css" />
</head>

<body class="page page--light">

  <div class="toasts" id="toasts" aria-live="polite"></div>

  <!-- ‚úÖ HEADER unificado (base.css) -->
  <header class="siteHeader">
    <div class="container">
      <div class="headerRow">
        <!-- ‚úÖ Sin √≠cono -->
        <a class="brand" href="./index.html" aria-label="Ir a portada">
          <span class="brandText">Entre Copas &amp; Notas</span>
        </a>

        <!-- ‚úÖ Men√∫ a la derecha (sin bot√≥n ‚ÄúPr√≥ximos eventos‚Äù) -->
        <nav class="navDesktop" aria-label="Navegaci√≥n">
          <a class="navLink" href="./home.html#home">Home</a>
          <a class="navLink" href="./home.html#proximos">Pr√≥ximos</a>
          <a class="navLink" href="./home.html#info">General</a>
          <a class="navLink" href="./gallery.html" aria-current="page">Galer√≠a</a>
        </nav>

        <!-- (Opcional) Si ya ten√©s JS del drawer en otras p√°ginas, pod√©s reutilizarlo aqu√≠ -->
        <button class="hamburgerFab" id="hamburger"
          aria-label="Abrir men√∫" aria-expanded="false" aria-controls="mobileDrawer">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>

    <!-- Drawer (solo si tu base+JS lo manejan; si no, no estorba) -->
    <div class="drawerBackdrop" id="drawerBackdrop" hidden></div>
    <aside class="mobileDrawer" id="mobileDrawer" aria-hidden="true">
      <nav class="drawerNav" aria-label="Men√∫ m√≥vil">
        <a class="drawerLink" href="./home.html#home">Home</a>
        <a class="drawerLink" href="./home.html#proximos">Pr√≥ximos</a>
        <a class="drawerLink" href="./home.html#info">General</a>
        <a class="drawerLink" href="./gallery.html">Galer√≠a</a>
      </nav>
    </aside>
  </header>

  <!-- Hero -->
  <section class="heroLite" aria-label="Galer√≠a">
    <div class="container">
      <div class="heroLite__inner">
        <div class="kicker">Galer√≠a</div>

        <!-- ‚úÖ Quitamos el H1 para no duplicar ‚ÄúGaler√≠a‚Äù -->
        <p class="lead" id="pageLead">
          Un solo lugar para ver cocteler√≠a y maridajes. Explor√° la grilla y filtr√° por fecha o por texto.
        </p>

        <!-- ‚úÖ Solo queda ‚ÄúLeer rese√±as‚Äù -->
        <div class="heroLite__actions">
          <a class="btn primary" href="#rese√±as">Leer rese√±as</a>
        </div>
      </div>
    </div>
  </section>

  <main>
    <!-- Galer√≠a -->
    <section class="section" id="galeria">
      <div class="container">
        <!-- ‚úÖ T√≠tulo principal va aqu√≠ -->
        <div class="sectionHead sectionHead--left">
          <div>
            <p class="sub" id="gridSub">Filtr√° por fecha (evento) y encontr√° contenido r√°pido.</p>
          </div>
        </div>

        <!-- ‚úÖ Filtros: Fecha + Tipo + Buscar -->
        <div class="filters">
          <div class="field">
            <label for="filterDate">Fecha</label>
            <select id="filterDate" class="select" aria-label="Filtrar por fecha">
              <option value="">Todas</option>
            </select>
          </div>

          <div class="field">
            <label for="filterType">Tipo</label>
            <select id="filterType" class="select" aria-label="Filtrar por tipo">
              <option value="all">Todo</option>
              <option value="cocteles">Cocteles</option>
              <option value="maridajes">Maridajes</option>
            </select>
          </div>

          <div class="field field--search">
            <label for="filterSearch">Buscar</label>
            <div class="searchWrap">
              <input id="filterSearch" class="input" type="search" placeholder="Ej: mojito, queso, vino blanco‚Ä¶" />
              <span class="searchHint" aria-hidden="true">‚åòK</span>
            </div>
          </div>
        </div>

        <div class="galleryGrid" id="galleryGrid" aria-label="Galer√≠a">
          <!-- skeletons -->
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
        </div>
      </div>
    </section>

    <!-- Rese√±as -->
    <section class="section section--reviews" id="rese√±as">
      <div class="container">
        <div class="sectionHead sectionHead--left">
          <div>
            <h2 class="h2">Rese√±as de eventos</h2>
            <p class="sub">Eleg√≠ el evento y dej√° tu rese√±a. Se ver√°n en tiempo real.</p>
          </div>
        </div>

        <div class="reviewsWrap">
          <form class="reviewForm" id="reviewForm" autocomplete="off">
            <div class="row">
              <div class="field">
                <label for="reviewEvent">Evento</label>
                <select id="reviewEvent" class="select" required>
                  <option value="" disabled selected>Seleccion√° un evento</option>
                </select>
              </div>

              <div class="field">
                <label for="reviewName">Tu nombre</label>
                <input id="reviewName" class="input" type="text" placeholder="Opcional" maxlength="40" />
              </div>
            </div>

            <div class="field">
              <label for="reviewText">Tu rese√±a</label>
              <textarea id="reviewText" class="textarea" rows="4"
                placeholder="Contanos c√≥mo estuvo la experiencia‚Ä¶" required maxlength="420"></textarea>
              <div class="hint"><span id="reviewCount">0</span>/420</div>
            </div>

            <div class="formActions">
              <button class="btn primary" type="submit">Publicar rese√±a</button>
              <p class="miniNote">Al publicar acept√°s que tu comentario sea visible para otros.</p>
            </div>
          </form>

          <!-- ‚úÖ Contenedor estilizado para comentarios -->
          <div class="reviewList" id="reviewList" aria-label="Listado de rese√±as">
            <div class="reviewHeader">
              <div class="reviewHeader__title">Comentarios</div>
              <div class="reviewHeader__meta" id="reviewMeta">0 comentarios</div>
            </div>
            <div class="reviewDivider"></div>

            <!-- JS puede inyectar aqu√≠ -->
            <div class="reviewItems" id="reviewItems"></div>

            <div class="reviewEmpty" id="reviewEmpty">
              A√∫n no hay rese√±as. S√© la primera persona en comentar üôå
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer footer--light">
    <div class="container">
      <div class="footerRow footerRow--light">
        <div>Entre Copas &amp; Notas ¬∑ Experiencias</div>
        <div class="social">
          <a class="icon-btn icon-btn--light"
            href="https://wa.me/50688323801?text=Hola%20quiero%20info%20de%20los%20eventos%20%F0%9F%8D%B7%F0%9F%8D%B8"
            target="_blank" rel="noopener" aria-label="WhatsApp">WA</a>
          <a class="icon-btn icon-btn--light" href="https://instagram.com/entrecopasynotas" target="_blank"
            rel="noopener" aria-label="Instagram">IG</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- ‚úÖ Page type por querystring -->
  <script>
    (function () {
      const params = new URLSearchParams(location.search);
      const t = (params.get("type") || "all").toLowerCase();
      window.ECN_PAGE = { type: t };

      // Sync select Tipo
      const sel = document.getElementById("filterType");
      if (sel) sel.value = (t.includes("coct") ? "cocteles" : (t.includes("marid") ? "maridajes" : "all"));

      // Cambia querystring al cambiar el select (sin botones)
      if (sel) {
        sel.addEventListener("change", () => {
          const next = sel.value || "all";
          const u = new URL(location.href);
          u.searchParams.set("type", next);
          location.href = u.toString();
        });
      }

      // UI text (solo copy)
      const pageLead = document.getElementById("pageLead");
      const gridTitle = document.getElementById("gridTitle");

      if (t.includes("coct")) {
        if (pageLead) pageLead.textContent = "Creaciones, t√©cnica y sabor. Explor√° cocteler√≠a y momentos del evento.";
        if (gridTitle) gridTitle.textContent = "Galer√≠a de Cocteles";
      } else if (t.includes("marid")) {
        if (pageLead) pageLead.textContent = "Vinos, sabores y armon√≠as. Explor√° maridajes y momentos del evento.";
        if (gridTitle) gridTitle.textContent = "Galer√≠a de Maridajes";
      } else {
        if (pageLead) pageLead.textContent = "Un solo lugar para ver cocteler√≠a y maridajes. Explor√° la grilla y filtr√° por fecha o por texto.";
        if (gridTitle) gridTitle.textContent = "Galer√≠a (Todo)";
      }
    })();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./js/supabaseClient.js"></script>
  <script src="./js/gallery.js"></script>

</body>
</html>
