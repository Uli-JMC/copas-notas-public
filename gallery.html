<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />

  <title>Galer√≠a | Entre Copas & Notas</title>
  <meta name="description" content="Galer√≠a de cocteles y maridajes + rese√±as de eventos. Filtr√° por fecha y descubr√≠ experiencias." />

  <link rel="stylesheet" href="./css/gallery.css" />
</head>

<body class="page page--light">

  <div class="toasts" id="toasts" aria-live="polite"></div>

  <header class="topbar topbar--light">
    <div class="container">
      <nav class="nav">
        <a class="brand" href="./index.html" aria-label="Ir a portada">
          <img src="./assets/img/logocuadrado-entrecopasynotas.png" alt="Entre Copas & Notas" />
          <span>Entre Copas &amp; Notas</span>
        </a>

        <div class="navlinks">
          <a href="./home.html#home">Home</a>
          <a href="./home.html#proximos">Pr√≥ximos</a>
          <a href="./home.html#info">General</a>
          <a href="./gallery.html" aria-current="page">Galer√≠a</a>
        </div>

        <div class="navright">
          <a class="btn btn--light" href="./home.html#proximos">Pr√≥ximos eventos</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="heroLite" aria-label="Galer√≠a">
    <div class="container">
      <div class="heroLite__inner">
        <div class="kicker">Galer√≠a</div>

        <h1 class="h1" id="pageTitle">Momentos, recetas y experiencias</h1>

        <p class="lead" id="pageLead">
          Un solo lugar para ver cocteler√≠a y maridajes. Explor√° la grilla y filtr√° por fecha o por texto.
        </p>

        <div class="heroLite__actions" role="navigation" aria-label="Secciones">
          <a class="btn primary btn--light" href="#galeria">Ver galer√≠a</a>
          <a class="btn btn--light" href="#rese√±as">Leer rese√±as</a>
        </div>

        <!-- Selector de tipo (recarga cambiando ECN_PAGE.type) -->
        <div class="heroLite__actions" style="margin-top:10px;">
          <a class="btn btn--light" href="./gallery.html?type=all" id="btnAll">Todo</a>
          <a class="btn btn--light" href="./gallery.html?type=cocteles" id="btnCocteles">Cocteles</a>
          <a class="btn btn--light" href="./gallery.html?type=maridajes" id="btnMaridajes">Maridajes</a>
        </div>
      </div>
    </div>
  </section>

  <main>
    <!-- Galer√≠a -->
    <section class="section section--light" id="galeria">
      <div class="container">
        <div class="sectionHead sectionHead--left">
          <div>
            <h2 class="h2 h2--dark" id="gridTitle">Galer√≠a</h2>
            <p class="sub sub--dark" id="gridSub">Filtr√° por fecha (evento) y encontr√° contenido r√°pido.</p>
          </div>
        </div>

        <div class="filters">
          <div class="field">
            <label for="filterDate" class="label">Fecha</label>
            <select id="filterDate" class="select" aria-label="Filtrar por fecha">
              <option value="">Todas</option>
            </select>
          </div>

          <div class="field">
            <label for="filterSearch" class="label">Buscar</label>
            <input id="filterSearch" class="input" type="search" placeholder="Ej: mojito, queso, vino blanco‚Ä¶" />
          </div>
        </div>

        <div class="galleryGrid" id="galleryGrid" aria-label="Galer√≠a">
          <!-- skeletons -->
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
          <article class="gItem gItem--skeleton" aria-hidden="true"></article>
        </div>
      </div>
    </section>

    <!-- Rese√±as -->
    <section class="section section--light section--reviews" id="rese√±as">
      <div class="container">
        <div class="sectionHead sectionHead--left">
          <div>
            <h2 class="h2 h2--dark">Rese√±as de eventos</h2>
            <p class="sub sub--dark">Eleg√≠ el evento y dej√° tu rese√±a. Se ver√°n en tiempo real.</p>
          </div>
        </div>

        <div class="reviewsWrap">
          <form class="reviewForm" id="reviewForm" autocomplete="off">
            <div class="row">
              <div class="field">
                <label class="label" for="reviewEvent">Evento</label>
                <select id="reviewEvent" class="select" required>
                  <option value="" disabled selected>Seleccion√° un evento</option>
                </select>
              </div>

              <div class="field">
                <label class="label" for="reviewName">Tu nombre</label>
                <input id="reviewName" class="input" type="text" placeholder="Opcional" maxlength="40" />
              </div>
            </div>

            <div class="field">
              <label class="label" for="reviewText">Tu rese√±a</label>
              <textarea id="reviewText" class="textarea" rows="4"
                placeholder="Contanos c√≥mo estuvo la experiencia‚Ä¶" required maxlength="420"></textarea>
              <div class="hint"><span id="reviewCount">0</span>/420</div>
            </div>

            <div class="formActions">
              <button class="btn primary btn--light" type="submit">Publicar rese√±a</button>
              <p class="miniNote">Al publicar acept√°s que tu comentario sea visible para otros.</p>
            </div>
          </form>

          <div class="reviewList" id="reviewList" aria-label="Listado de rese√±as">
            <div class="reviewEmpty" id="reviewEmpty">
              A√∫n no hay rese√±as. S√© la primera persona en comentar üôå
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer footer--light">
    <div class="container">
      <div class="footerRow footerRow--light">
        <div>Entre Copas &amp; Notas ¬∑ Experiencias</div>
        <div class="social">
          <a class="icon-btn icon-btn--light"
            href="https://wa.me/50688323801?text=Hola%20quiero%20info%20de%20los%20eventos%20%F0%9F%8D%B7%F0%9F%8D%B8"
            target="_blank" rel="noopener" aria-label="WhatsApp">WA</a>
          <a class="icon-btn icon-btn--light" href="https://instagram.com/entrecopasynotas" target="_blank"
            rel="noopener" aria-label="Instagram">IG</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // ‚úÖ Decide tipo por querystring: ?type=all|cocteles|maridajes
    (function () {
      const params = new URLSearchParams(location.search);
      const t = (params.get("type") || "all").toLowerCase();

      window.ECN_PAGE = { type: t };

      // UI text (solo copy, no afecta data)
      const pageTitle = document.getElementById("pageTitle");
      const pageLead = document.getElementById("pageLead");
      const gridTitle = document.getElementById("gridTitle");
      const gridSub = document.getElementById("gridSub");

      const btnAll = document.getElementById("btnAll");
      const btnCoct = document.getElementById("btnCocteles");
      const btnMar = document.getElementById("btnMaridajes");

      // ‚Äúactivo‚Äù simple (sin clases nuevas)
      function markActive(a) {
        [btnAll, btnCoct, btnMar].forEach(x => x && x.removeAttribute("aria-current"));
        if (a) a.setAttribute("aria-current", "page");
      }

      if (t.includes("coct")) {
        if (pageTitle) pageTitle.textContent = "Cocteles";
        if (pageLead) pageLead.textContent = "Creaciones, t√©cnica y sabor. Explor√° cocteler√≠a y momentos del evento.";
        if (gridTitle) gridTitle.textContent = "Galer√≠a de Cocteles";
        if (gridSub) gridSub.textContent = "Filtr√° por fecha (evento) y encontr√° contenido r√°pido.";
        markActive(btnCoct);
      } else if (t.includes("marid")) {
        if (pageTitle) pageTitle.textContent = "Maridajes";
        if (pageLead) pageLead.textContent = "Vinos, sabores y armon√≠as. Explor√° maridajes y momentos del evento.";
        if (gridTitle) gridTitle.textContent = "Galer√≠a de Maridajes";
        if (gridSub) gridSub.textContent = "Filtr√° por fecha (evento) y encontr√° contenido r√°pido.";
        markActive(btnMar);
      } else {
        if (pageTitle) pageTitle.textContent = "Galer√≠a";
        if (pageLead) pageLead.textContent = "Un solo lugar para ver cocteler√≠a y maridajes. Explor√° la grilla y filtr√° por fecha o por texto.";
        if (gridTitle) gridTitle.textContent = "Galer√≠a (Todo)";
        if (gridSub) gridSub.textContent = "Filtr√° por fecha (evento) y encontr√° contenido r√°pido.";
        markActive(btnAll);
      }
    })();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./js/supabaseClient.js"></script>
  <script src="./js/gallery.js"></script>

</body>
</html>
