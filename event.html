<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <title>Evento | Entre Copas & Notas</title>
  <meta name="description" content="Detalle del evento: fechas, cupos y descripción." />

  <link rel="stylesheet" href="./css/base.css" />
  <!-- cache buster -->
  <link rel="stylesheet" href="./css/event.css?v=20260217-ux2" />
</head>

<body>
  <!-- Toasts -->
  <div class="toasts" id="toasts" aria-live="polite" aria-relevant="additions"></div>

  <!-- Loader -->
  <div id="pageLoader" aria-hidden="true"
    style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);backdrop-filter: blur(6px);z-index:9999;opacity:0;pointer-events:none;transition:opacity .2s ease;">
    <div
      style="width:54px;height:54px;border-radius:999px;border:3px solid rgba(255,255,255,.18);border-top-color:rgba(255,255,255,.75);animation:spin 1s linear infinite;">
    </div>
  </div>
  <style>
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>

  <!-- Header (NO TOCAR) -->
  <header class="topbar">
    <div class="container">
      <div class="nav">
        <a class="brand" href="./home.html#proximos" aria-label="Volver a próximos eventos">
          <span class="backIcon" aria-hidden="true">←</span>
          <span class="backText">Volver</span>
        </a>

        <a class="brandRight" href="./home.html" aria-label="Ir a home">
          <span>Entre Copas &amp; Notas</span>
        </a>
      </div>
    </div>
  </header>

  <!-- EVENT -->
  <section class="hero" aria-label="Detalle del evento">
    <!-- Mantener por compatibilidad con tu JS (lo apagamos por CSS) -->
    <div class="heroBg" id="heroBg" aria-hidden="true"></div>

    <div class="container heroWrap">
      <div class="eventShell" id="heroCard">
        <!-- ROW PRINCIPAL: foto izquierda + contenido derecha -->
        <div class="eventRow">
          <!-- LEFT: foto grande -->
          <aside class="eventLeft" aria-label="Foto del evento">
            <div class="eventImgWrap">
              <img
                id="evPhoto"
                class="eventImg"
                src="./assets/img/hero-1.jpg"
                alt="Foto del evento"
                loading="eager"
                decoding="async"
              />
            </div>
          </aside>

          <!-- RIGHT: contenido -->
          <div class="eventRight">
            <!-- meta pills (tu JS pinta aquí) -->
            <div class="heroMeta eventMeta" id="metaRow"></div>

            <!-- header row: título + estado (badge arriba derecha) -->
            <div class="eventHeaderRow">
              <h1 class="title eventTitle" id="evTitle">Evento</h1>

              <!-- Estado (se controla con hidden desde JS) -->
              <div class="eventStatus">
                <span class="badge" id="statusAvailable" hidden>INSCRIPCIONES DISPONIBLES</span>
                <span class="badge danger" id="statusSold" hidden>AGOTADO</span>
                <span class="badge" id="statusPending" hidden>CUPOS POR CONFIRMAR</span>
              </div>
            </div>

            <p class="desc eventDesc" id="evDesc">Descripción del evento.</p>

            <!-- ✅ BLOQUE “TEXTO ADICIONAL” + BANNER (sin cards pesadas) -->
            <section class="eventExtra" aria-label="Información adicional">
              <div class="eventExtraInner">
                <div class="eventExtraBanner" aria-label="Banner del evento">
                  <img
                    id="evBannerImg"
                    class="eventBannerImg"
                    src="./assets/img/hero-1.jpg"
                    alt="Banner del menú / maridaje / bebidas"
                    loading="lazy"
                    decoding="async"
                  />
                </div>

                <div class="eventExtraText">
                  <p class="eventExtraKicker">Experiencia</p>
                  <p class="eventExtraTitle">Menú / vinos y maridajes</p>
                  <p class="eventExtraDesc" id="evBannerText">
                    Texto adicional solo para event (amplía la descripción). Aquí luego lo conectamos a BD.
                  </p>
                </div>
              </div>
            </section>

            <!-- Fechas + Detalles en una misma columna derecha (como tu referencia) -->
            <section class="eventInfo" aria-label="Fechas y detalles">
              <!-- FECHAS -->
              <div class="eventBlock">
                <h2 class="h2">Fechas disponibles</h2>
                <p class="sub">Seleccioná una fecha para tu inscripción (si hay más de una).</p>

                <div class="dates" id="dateList"></div>

                <!-- notices reales (tu JS usa estos IDs, NO los cambio) -->
                <div class="notice" id="availNotice" hidden>
                  <span class="badge">Inscripciones disponibles</span>
                  <p class="noticeLegend">Inscribite y disfrutá de esta experiencia.</p>
                </div>

                <div class="notice" id="soldNotice" hidden>
                  <span class="badge danger">Agotado</span>
                  <p class="noticeLegend">Este evento no tiene cupos disponibles.</p>
                </div>

                <div class="notice" id="pendingNotice" hidden>
                  <span class="badge">Cupos por confirmar</span>
                  <p class="noticeLegend">Estamos actualizando las fechas y cupos. Probá en unos segundos.</p>
                </div>
              </div>

              <!-- DETALLES -->
              <div class="eventBlock">
                <h2 class="h2">Detalles</h2>
                <div class="kv" id="kv"></div>

                <div class="actions">
                  <a class="btn" id="btnHome" href="./home.html#proximos">Ver otros eventos</a>
                  <a class="btn primary" id="btnRegister" href="./register.html">Inscribirme</a>
                </div>

                <p class="fine">
                  Al inscribirte, te llega confirmación al correo. Si seleccionás “recibir info”, también por WhatsApp.
                </p>
              </div>
            </section>
          </div>
        </div>

        <!-- BOTTOM: incluye + recomendaciones (en una fila, ligero) -->
        <section class="eventBottom" aria-label="Incluye y recomendaciones">
          <div class="eventBottomGrid">
            <div class="eventBottomItem">
              <p class="miniTitle">¿Qué incluye?</p>
              <ul class="miniList">
                <li>Guía durante la experiencia</li>
                <li>Degustación según el formato del evento</li>
                <li>Dinámica y recomendaciones prácticas</li>
              </ul>
            </div>

            <div class="eventBottomItem">
              <p class="miniTitle">Recomendaciones</p>
              <ul class="miniList">
                <li>Llegá 10–15 min antes</li>
                <li>Traé buena vibra y curiosidad</li>
                <li>Indicá alergias al inscribirte</li>
              </ul>
            </div>
          </div>
        </section>
      </div>
    </div>
  </section>

  <!-- Footer (NO TOCAR) -->
  <footer class="footer">
    <div class="container">
      <div class="footerRow">
        <div>Entre Copas &amp; Notas · Experiencias</div>
        <div class="social">
          <a class="icon-btn"
            href="https://wa.me/50688323801?text=Hola%20quiero%20info%20de%20los%20eventos%20%F0%9F%8D%B7%F0%9F%8D%B8"
            target="_blank" rel="noopener" aria-label="WhatsApp">WA</a>

          <a class="icon-btn" href="https://instagram.com/entrecopasynotas" target="_blank" rel="noopener"
            aria-label="Instagram">IG</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./js/supabaseClient.js"></script>

  <!-- Lógica -->
  <script src="./js/event.js"></script>
</body>
</html>
