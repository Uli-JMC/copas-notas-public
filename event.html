<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <title>Evento | Entre Copas & Notas</title>
  <meta name="description" content="Detalle del evento: fechas, cupos y descripción." />

  <link rel="stylesheet" href="./css/base.css" />
  <!-- ✅ cache buster para que veás el cambio sí o sí -->
  <link rel="stylesheet" href="./css/event.css?v=20260217-ux" />
</head>

<body>
  <!-- Toasts -->
  <div class="toasts" id="toasts" aria-live="polite" aria-relevant="additions"></div>

  <!-- ✅ Loader suave -->
  <div id="pageLoader" aria-hidden="true"
    style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);backdrop-filter: blur(6px);z-index:9999;opacity:0;pointer-events:none;transition:opacity .2s ease;">
    <div
      style="width:54px;height:54px;border-radius:999px;border:3px solid rgba(255,255,255,.18);border-top-color:rgba(255,255,255,.75);animation:spin 1s linear infinite;">
    </div>
  </div>
  <style>
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>

  <!-- Header (NO TOCAR) -->
  <header class="topbar">
    <div class="container">
      <div class="nav">
        <a class="brand" href="./home.html#proximos" aria-label="Volver a próximos eventos">
          <span class="backIcon" aria-hidden="true">←</span>
          <span class="backText">Volver</span>
        </a>

        <a class="brandRight" href="./home.html" aria-label="Ir a home">
          <span>Entre Copas &amp; Notas</span>
        </a>
      </div>
    </div>
  </header>

  <!-- ============================================================
       HERO NUEVO (sensorial)
       - Mantiene IDs para tu JS
       - Ya NO dependemos visualmente del fondo borroso
  ============================================================ -->
  <section class="hero" aria-label="Detalle del evento">
    <!-- ✅ Lo dejo por compatibilidad con tu JS, pero lo vamos a apagar por CSS -->
    <div class="heroBg" id="heroBg" aria-hidden="true"></div>

    <div class="container heroWrap">
      <div class="heroCard heroNew" id="heroCard">
        <div class="heroTop">
          <div class="heroText">
            <div class="heroMeta" id="metaRow"></div>

            <h1 class="title titleNew" id="evTitle">Evento</h1>
            <p class="desc descNew" id="evDesc">Descripción del evento.</p>
          </div>

          <!-- ✅ FOTO PROTAGONISTA (misma del slider / events.img) -->
          <div class="heroMedia" aria-label="Foto del evento">
            <img
              id="evPhoto"
              class="heroImg"
              src="./assets/img/hero-1.jpg"
              alt="Foto del evento"
              loading="eager"
              decoding="async"
            />
          </div>
        </div>

        <!-- ============================================================
             NUEVA SECCIÓN: Banner / Menú / Bebidas / Maridajes
             - Imagen adicional (desde BD)
             - Texto adicional (desde BD)
        ============================================================ -->
        <section class="experienceBanner" aria-label="Experiencia y menú">
          <div class="expMedia">
            <img
              id="evBannerImg"
              class="expImg"
              src="./assets/img/hero-1.jpg"
              alt="Menú / Maridaje / Bebidas"
              loading="lazy"
              decoding="async"
            />
          </div>

          <div class="expText">
            <p class="expKicker">Experiencia</p>
            <h2 class="expTitle">Menú &amp; detalles de la cata</h2>
            <p class="expDesc" id="evBannerText">
              (Aquí va el texto desde BD: vinos y maridajes / bebidas del taller, etc.)
            </p>
          </div>
        </section>

        <!-- ============================================================
             SECCIÓN ÚNICA (menos “cards”)
             - Fechas + Detalles dentro de un mismo bloque
        ============================================================ -->
        <section class="infoSection" aria-label="Fechas y detalles">
          <div class="infoGrid">
            <div class="infoBlock">
              <h2 class="h2">Fechas disponibles</h2>
              <p class="sub">Seleccioná una fecha para tu inscripción (si hay más de una).</p>

              <div class="dates" id="dateList"></div>

              <!-- ✅ Estados -->
              <div class="notice" id="availNotice" hidden>
                <span class="badge">Inscripciones disponibles</span>
                <p class="noticeLegend">Inscribite y disfrutá de esta experiencia.</p>
              </div>

              <div class="notice" id="soldNotice" hidden>
                <span class="badge danger">Agotado</span>
                <p class="noticeLegend">Este evento no tiene cupos disponibles.</p>
              </div>

              <div class="notice" id="pendingNotice" hidden>
                <span class="badge">Cupos por confirmar</span>
                <p class="noticeLegend">Estamos actualizando las fechas y cupos. Probá en unos segundos.</p>
              </div>
            </div>

            <div class="infoBlock">
              <h2 class="h2">Detalles</h2>

              <!-- Tu JS pinta esto -->
              <div class="kv" id="kv"></div>

              <div class="actions">
                <a class="btn" id="btnHome" href="./home.html#proximos">Ver otros eventos</a>
                <a class="btn primary" id="btnRegister" href="./register.html">Inscribirme</a>
              </div>

              <p class="fine">
                Al inscribirte, te llega confirmación al correo. Si seleccionás “recibir info”, también por WhatsApp.
              </p>
            </div>
          </div>
        </section>

        <!-- ============================================================
             “Qué incluye” + “Recomendaciones”
             - Menos tarjetas, más limpio
        ============================================================ -->
        <section class="tipsSection" aria-label="Qué incluye y recomendaciones">
          <div class="tipsGrid">
            <div class="tip">
              <p class="miniTitle">¿Qué incluye?</p>
              <ul class="miniList">
                <li>Guía durante la experiencia</li>
                <li>Degustación según el formato del evento</li>
                <li>Dinámica y recomendaciones prácticas</li>
              </ul>
            </div>

            <div class="tip">
              <p class="miniTitle">Recomendaciones</p>
              <ul class="miniList">
                <li>Llegá 10–15 min antes</li>
                <li>Traé buena vibra y curiosidad</li>
                <li>Indicá alergias al inscribirte</li>
              </ul>
            </div>
          </div>
        </section>

      </div>
    </div>
  </section>

  <!-- Footer (NO TOCAR) -->
  <footer class="footer">
    <div class="container">
      <div class="footerRow">
        <div>Entre Copas &amp; Notas · Experiencias</div>
        <div class="social">
          <a class="icon-btn"
            href="https://wa.me/50688323801?text=Hola%20quiero%20info%20de%20los%20eventos%20%F0%9F%8D%B7%F0%9F%8D%B8"
            target="_blank" rel="noopener" aria-label="WhatsApp">WA</a>

          <a class="icon-btn" href="https://instagram.com/entrecopasynotas" target="_blank" rel="noopener"
            aria-label="Instagram">IG</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./js/supabaseClient.js"></script>

  <!-- Lógica -->
  <script src="./js/event.js"></script>
</body>

</html>
