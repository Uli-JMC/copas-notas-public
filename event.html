<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <title>Evento | Entre Copas & Notas</title>
  <meta name="description" content="Detalle del evento: fechas, cupos y descripción." />

  <link rel="stylesheet" href="./css/base.css" />
  <link rel="stylesheet" href="./css/event.css" />
</head>

<body>
  <!-- Toasts -->
  <div class="toasts" id="toasts" aria-live="polite" aria-relevant="additions"></div>

  <!-- ✅ Loader suave -->
  <div id="pageLoader" aria-hidden="true"
    style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);backdrop-filter: blur(6px);z-index:9999;opacity:0;pointer-events:none;transition:opacity .2s ease;">
    <div
      style="width:54px;height:54px;border-radius:999px;border:3px solid rgba(255,255,255,.18);border-top-color:rgba(255,255,255,.75);animation:spin 1s linear infinite;">
    </div>
  </div>
  <style>
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>

  <!-- Header -->
  <header class="topbar">
    <div class="container">
      <div class="nav">
        <a class="brand" href="./home.html#proximos" aria-label="Volver a próximos eventos">
          <span class="backIcon" aria-hidden="true">←</span>
          <span class="backText">Volver</span>
        </a>

        <!-- ✅ SIN LOGO: solo texto -->
        <a class="brandRight" href="./home.html" aria-label="Ir a home">
          <span>Entre Copas &amp; Notas</span>
        </a>
      </div>
    </div>
  </header>

  <!-- ✅ EVENT HERO (sensorial, sin “fondo borroso” como protagonista) -->
  <main class="eventPage" aria-label="Detalle del evento">
    <section class="eventHero" aria-label="Introducción del evento">
      <!-- Mantenemos heroBg por compatibilidad (si tu JS lo usa), pero ya no es “el fondo principal” -->
      <div class="heroBg" id="heroBg" aria-hidden="true"></div>

      <div class="container eventHeroWrap">
        <!-- ✅ Media real del evento (NUEVO ID) -->
        <figure class="eventHeroMedia" id="heroMedia" aria-label="Imagen del evento"></figure>

        <!-- ✅ Contenido editorial -->
        <div class="eventHeroContent">
          <div class="heroMeta" id="metaRow"></div>

          <h1 class="title" id="evTitle">Evento</h1>
          <p class="desc" id="evDesc">Descripción del evento.</p>

          <!-- ✅ Sección extra desde BD (NUEVO) -->
          <section class="eventExtra" id="evExtra" hidden aria-label="Información adicional">
            <h2 class="h2">Menú / Bebidas</h2>
            <p class="sub">Lo que vas a probar y descubrir en esta experiencia.</p>
            <div class="extraBox" id="evExtraText"></div>
          </section>
        </div>
      </div>
    </section>

    <!-- ✅ PANEL ÚNICO: Fechas + Detalles + CTA -->
    <section class="eventPanel" aria-label="Inscripción y detalles">
      <div class="container">
        <div class="panelOne">
          <div class="panelHead">
            <div>
              <h2 class="h2">Inscripción</h2>
              <p class="sub">Elegí una fecha y revisá los detalles del evento.</p>
            </div>

            <div class="actions actionsTop">
              <a class="btn" id="btnHome" href="./home.html#proximos">Ver otros eventos</a>
              <a class="btn primary" id="btnRegister" href="./register.html">Inscribirme</a>
            </div>
          </div>

          <div class="panelGrid">
            <!-- Fechas -->
            <div class="panelCol">
              <p class="kicker">Fechas disponibles</p>
              <div class="dates" id="dateList"></div>

              <!-- ✅ Estado: disponible -->
              <div class="notice" id="availNotice" hidden>
                <span class="badge">Inscripciones disponibles</span>
                <p class="noticeLegend">Inscribite y disfrutá de esta experiencia.</p>
              </div>

              <!-- ✅ Estado: agotado -->
              <div class="notice" id="soldNotice" hidden>
                <span class="badge danger">Agotado</span>
                <p class="noticeLegend">Este evento no tiene cupos disponibles.</p>
              </div>

              <!-- ✅ Estado: por confirmar -->
              <div class="notice" id="pendingNotice" hidden>
                <span class="badge">Cupos por confirmar</span>
                <p class="noticeLegend">Estamos actualizando las fechas y cupos. Probá en unos segundos.</p>
              </div>
            </div>

            <!-- Detalles -->
            <div class="panelCol">
              <p class="kicker">Detalles</p>
              <div class="kv" id="kv"></div>

              <p class="fine">
                Al inscribirte, te llega confirmación al correo. Si seleccionás “recibir info”, también por WhatsApp.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ✅ Cierre más ligero (menos “mini cards”) -->
    <section class="eventAfter" aria-label="Información final">
      <div class="container">
        <div class="afterGrid">
          <div class="afterBlock">
            <p class="miniTitle">¿Qué incluye?</p>
            <ul class="miniList">
              <li>Guía durante la experiencia</li>
              <li>Degustación según el formato del evento</li>
              <li>Dinámica y recomendaciones prácticas</li>
            </ul>
          </div>

          <div class="afterBlock">
            <p class="miniTitle">Recomendaciones</p>
            <ul class="miniList">
              <li>Llegá 10–15 min antes</li>
              <li>Traé buena vibra y curiosidad</li>
              <li>Indicá alergias al inscribirte</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footerRow">
        <div>Entre Copas &amp; Notas · Experiencias</div>
        <div class="social">
          <a class="icon-btn"
             href="https://wa.me/50688323801?text=Hola%20quiero%20info%20de%20los%20eventos%20%F0%9F%8D%B7%F0%9F%8D%B8"
             target="_blank" rel="noopener" aria-label="WhatsApp">WA</a>
          <a class="icon-btn" href="https://instagram.com/entrecopasynotas" target="_blank" rel="noopener"
             aria-label="Instagram">IG</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./js/supabaseClient.js"></script>

  <!-- Lógica -->
  <script src="./js/event.js"></script>
</body>
</html>
